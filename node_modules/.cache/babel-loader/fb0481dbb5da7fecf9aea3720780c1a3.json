{"ast":null,"code":"import _slicedToArray from \"F:\\\\React\\\\reactpro1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\React\\\\reactpro1\\\\src\\\\views\\\\Login\\\\Login.js\";\nimport React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { Button } from \"reactstrap\";\nimport \"./login.scss\";\nimport InputField from \"../../components/FormFields/InputField.js\";\nimport { loginApi } from \"./loginApi\";\nimport { Redirect } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { authAction, loginUser } from \"../../store/reducers/actions/authActions\";\n\nconst Login = ({\n  history\n}) => {\n  const _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        success = _useState6[0],\n        setSuccess = _useState6[1];\n\n  const dispatch = useDispatch();\n  const formik = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    validationSchema: Yup.object().shape({\n      email: Yup.string().email(\"Email is invalid\").required(\"Email is required\"),\n      password: Yup.string().required(\"Password is required\")\n    }),\n    onSubmit: values => {\n      setError(\"\");\n      setSuccess(\"\");\n      loginApi(values.email, values.password).then(res => {\n        const userinfo = {\n          email: values.email,\n          password: values.password,\n          token: res.token\n        };\n        dispatch(loginUser(userinfo));\n        localStorage.setItem(\"_token\", JSON.stringify(res.token));\n        console.log(\"response\", res);\n        setSuccess(res.message);\n        history.push(\"/Dashboard\");\n        console.log(\"_Token\", localStorage.getItem(\"_token\"));\n      }).catch(err => {\n        console.log(\"error\", err);\n        setError(err.response.data.message);\n      });\n    }\n  });\n\n  if (localStorage.getItem(\"_token\")) {\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    });\n  }\n\n  console.log(\"sucess\", success);\n  return React.createElement(\"div\", {\n    className: \"login_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    className: \"login_form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Login Form\"), React.createElement(InputField, {\n    label: \"Email\",\n    name: \"email\",\n    className: formik.errors.email && formik.touched.email && \" is-invalid\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.email,\n    errorLabel: formik.errors.email,\n    iconClass: \"email\",\n    placeholder: \"Email \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), React.createElement(InputField, {\n    label: \"Password\",\n    name: \"password\",\n    className: (formik.errors.password && formik.touched.password || error) && \" is-invalid\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.password,\n    errorLabel: formik.errors.password || error,\n    iconClass: \"password\",\n    placeholder: \"Password \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(Button, {\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Login\"), error, success));\n};\n\nexport default Login;","map":{"version":3,"sources":["F:/React/reactpro1/src/views/Login/Login.js"],"names":["React","useState","useFormik","Yup","Button","InputField","loginApi","Redirect","useDispatch","useSelector","authAction","loginUser","Login","history","email","password","user","setUser","error","setError","success","setSuccess","dispatch","formik","initialValues","validationSchema","object","shape","string","required","onSubmit","values","then","res","userinfo","token","localStorage","setItem","JSON","stringify","console","log","message","push","getItem","catch","err","response","data","handleSubmit","errors","touched","handleBlur","handleChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { Button } from \"reactstrap\";\r\nimport \"./login.scss\";\r\nimport InputField from \"../../components/FormFields/InputField.js\";\r\nimport { loginApi } from \"./loginApi\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  authAction,\r\n  loginUser\r\n} from \"../../store/reducers/actions/authActions\";\r\n\r\nconst Login = ({ history }) => {\r\n  const [user, setUser] = useState({ email: \"\", password: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: \"\",\r\n      password: \"\"\r\n    },\r\n    validationSchema: Yup.object().shape({\r\n      email: Yup.string()\r\n        .email(\"Email is invalid\")\r\n        .required(\"Email is required\"),\r\n      password: Yup.string().required(\"Password is required\")\r\n    }),\r\n    onSubmit: values => {\r\n      setError(\"\");\r\n      setSuccess(\"\");\r\n      loginApi(values.email, values.password)\r\n        .then(res => {\r\n          const userinfo = {\r\n            email: values.email,\r\n            password: values.password,\r\n            token: res.token\r\n          };\r\n          dispatch(loginUser(userinfo));\r\n          localStorage.setItem(\"_token\", JSON.stringify(res.token));\r\n          console.log(\"response\", res);\r\n          setSuccess(res.message);\r\n          history.push(\"/Dashboard\");\r\n          console.log(\"_Token\", localStorage.getItem(\"_token\"));\r\n        })\r\n        .catch(err => {\r\n          console.log(\"error\", err);\r\n          setError(err.response.data.message);\r\n        });\r\n    }\r\n  });\r\n\r\n  if (localStorage.getItem(\"_token\")) {\r\n    return <Redirect to={\"/\"} />;\r\n  }\r\n  console.log(\"sucess\", success);\r\n  return (\r\n    <div className=\"login_container\">\r\n      <form onSubmit={formik.handleSubmit} className=\"login_form\">\r\n        <h1>Login Form</h1>\r\n        <InputField\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          className={\r\n            formik.errors.email && formik.touched.email && \" is-invalid\"\r\n          }\r\n          onBlur={formik.handleBlur}\r\n          onChange={formik.handleChange}\r\n          value={formik.values.email}\r\n          errorLabel={formik.errors.email}\r\n          iconClass=\"email\"\r\n          placeholder=\"Email \"\r\n        />\r\n\r\n        <InputField\r\n          label=\"Password\"\r\n          name=\"password\"\r\n          className={\r\n            ((formik.errors.password && formik.touched.password) || error) &&\r\n            \" is-invalid\"\r\n          }\r\n          onBlur={formik.handleBlur}\r\n          onChange={formik.handleChange}\r\n          value={formik.values.password}\r\n          errorLabel={formik.errors.password || error}\r\n          iconClass=\"password\"\r\n          placeholder=\"Password \"\r\n        />\r\n\r\n        <Button color=\"primary\">Login</Button>\r\n        {error}\r\n        {success}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}