{"ast":null,"code":"import _slicedToArray from \"F:\\\\React\\\\reactpro1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\React\\\\reactpro1\\\\src\\\\views\\\\Login\\\\Login.js\";\nimport React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { Button } from \"reactstrap\";\nimport \"./login.scss\";\nimport InputField from \"../../components/FormFields/InputField.js\";\nimport { loginApi } from \"./loginApi\";\nimport { Redirect } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { authAction } from \"../../store/reducers/actions/authActions\";\n\nconst Login = ({\n  history\n}) => {\n  const _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        success = _useState6[0],\n        setsuccess = _useState6[1];\n\n  const _useState7 = useState({\n    isLoggedIn: false\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        loggedin = _useState8[0],\n        setLoggedin = _useState8[1];\n\n  const loginUserDispath = useDispatch();\n\n  const loginUser = userParam => {\n    // console.log(userParam);\n    loginUserDispath(authAction(userParam));\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    validationSchema: Yup.object().shape({\n      email: Yup.string().email(\"Email is invalid\").required(\"Email is required\"),\n      password: Yup.string().required(\"Password is required\")\n    }),\n    onSubmit: values => {\n      loginApi(values.email, values.password).then(res => {\n        const userinfo = {\n          email: values.email,\n          password: values.password,\n          token: res.token\n        };\n        console.log(userinfo);\n        loginUser(\"User Info\", userinfo);\n        localStorage.setItem(\"_token\", JSON.stringify(res.token)); //setLoggedin({ isLoggedIn: true });\n        //return <Redirect to={\"/dashboard\"} />;\n\n        console.log(\"_Token\", localStorage.getItem(\"_token\"));\n        setsuccess(res.response.message);\n      }).catch(err => {// console.log(\"adfs\", err.response.data);\n      });\n    }\n  });\n\n  if (sessionStorage.getItem(\"userData\") || loggedin.isLoggedIn) {\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"login_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    className: \"login_form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Login Form\"), React.createElement(InputField, {\n    label: \"Email\",\n    name: \"email\",\n    className: formik.errors.email && formik.touched.email && \" is-invalid\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.email,\n    errorLabel: formik.errors.email,\n    iconClass: \"email\",\n    placeholder: \"Email \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(InputField, {\n    label: \"Password\",\n    name: \"password\",\n    className: (formik.errors.password && formik.touched.password || error) && \" is-invalid\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.password,\n    errorLabel: formik.errors.password || error,\n    iconClass: \"password\",\n    placeholder: \"Password \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(Button, {\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Login\")), error && error, success && success);\n};\n\nexport default Login;","map":{"version":3,"sources":["F:/React/reactpro1/src/views/Login/Login.js"],"names":["React","useState","useFormik","Yup","Button","InputField","loginApi","Redirect","useDispatch","useSelector","authAction","Login","history","email","password","user","setUser","error","setError","success","setsuccess","isLoggedIn","loggedin","setLoggedin","loginUserDispath","loginUser","userParam","formik","initialValues","validationSchema","object","shape","string","required","onSubmit","values","then","res","userinfo","token","console","log","localStorage","setItem","JSON","stringify","getItem","response","message","catch","err","sessionStorage","handleSubmit","errors","touched","handleBlur","handleChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { Button } from \"reactstrap\";\r\nimport \"./login.scss\";\r\nimport InputField from \"../../components/FormFields/InputField.js\";\r\nimport { loginApi } from \"./loginApi\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { authAction } from \"../../store/reducers/actions/authActions\";\r\n\r\nconst Login = ({ history }) => {\r\n  const [user, setUser] = useState({ email: \"\", password: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setsuccess] = useState(\"\");\r\n\r\n  const [loggedin, setLoggedin] = useState({ isLoggedIn: false });\r\n\r\n  const loginUserDispath = useDispatch();\r\n  const loginUser = userParam => {\r\n    // console.log(userParam);\r\n    loginUserDispath(authAction(userParam));\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: \"\",\r\n      password: \"\"\r\n    },\r\n    validationSchema: Yup.object().shape({\r\n      email: Yup.string()\r\n        .email(\"Email is invalid\")\r\n        .required(\"Email is required\"),\r\n      password: Yup.string().required(\"Password is required\")\r\n    }),\r\n    onSubmit: values => {\r\n      loginApi(values.email, values.password)\r\n        .then(res => {\r\n          const userinfo = {\r\n            email: values.email,\r\n            password: values.password,\r\n            token: res.token\r\n          };\r\n          console.log(userinfo);\r\n          loginUser(\"User Info\", userinfo);\r\n          localStorage.setItem(\"_token\", JSON.stringify(res.token));\r\n          //setLoggedin({ isLoggedIn: true });\r\n          //return <Redirect to={\"/dashboard\"} />;\r\n          console.log(\"_Token\", localStorage.getItem(\"_token\"));\r\n          setsuccess(res.response.message);\r\n        })\r\n        .catch(err => {\r\n          // console.log(\"adfs\", err.response.data);\r\n        });\r\n    }\r\n  });\r\n\r\n  if (sessionStorage.getItem(\"userData\") || loggedin.isLoggedIn) {\r\n    return <Redirect to={\"/\"} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"login_container\">\r\n      <form onSubmit={formik.handleSubmit} className=\"login_form\">\r\n        <h1>Login Form</h1>\r\n        <InputField\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          className={\r\n            formik.errors.email && formik.touched.email && \" is-invalid\"\r\n          }\r\n          onBlur={formik.handleBlur}\r\n          onChange={formik.handleChange}\r\n          value={formik.values.email}\r\n          errorLabel={formik.errors.email}\r\n          iconClass=\"email\"\r\n          placeholder=\"Email \"\r\n        />\r\n\r\n        <InputField\r\n          label=\"Password\"\r\n          name=\"password\"\r\n          className={\r\n            ((formik.errors.password && formik.touched.password) || error) &&\r\n            \" is-invalid\"\r\n          }\r\n          onBlur={formik.handleBlur}\r\n          onChange={formik.handleChange}\r\n          value={formik.values.password}\r\n          errorLabel={formik.errors.password || error}\r\n          iconClass=\"password\"\r\n          placeholder=\"Password \"\r\n        />\r\n\r\n        <Button color=\"primary\">Login</Button>\r\n      </form>\r\n      {error && error}\r\n      {success && success}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}