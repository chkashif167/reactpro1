{"ast":null,"code":"import _slicedToArray from \"F:\\\\React\\\\reactpro1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\React\\\\reactpro1\\\\src\\\\views\\\\Login\\\\Login.js\";\nimport React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { Button } from \"reactstrap\";\nimport \"./login.scss\";\nimport InputField from \"../../components/FormFields/InputField.js\";\nimport { loginApi } from \"./loginApi\";\nimport { Redirect } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { authAction, loginUser } from \"../../store/reducers/actions/authActions\";\n\nconst Login = ({\n  history\n}) => {\n  const _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        success = _useState6[0],\n        setSuccess = _useState6[1];\n\n  const _useState7 = useState({\n    loading: false\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        spinnerloading = _useState8[0],\n        setSpinnerloading = _useState8[1];\n\n  const dispatch = useDispatch();\n\n  const _useSelector = useSelector(state => ({\n    isLoggedIn: state.Auth.isLoggedIn\n  })),\n        isLoggedIn = _useSelector.isLoggedIn;\n\n  const formik = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    validationSchema: Yup.object().shape({\n      email: Yup.string().email(\"Email is invalid\").required(\"Email is required\"),\n      password: Yup.string().required(\"Password is required\")\n    }),\n    onSubmit: values => {\n      setError(\"\");\n      setSuccess(\"\");\n      setSpinnerloading({\n        loading: true\n      });\n      loginApi(values.email, values.password).then(res => {\n        setSpinnerloading({\n          loading: false\n        });\n        const userinfo = {\n          email: values.email,\n          password: values.password,\n          token: res.token\n        };\n        dispatch(loginUser(userinfo));\n        localStorage.setItem(\"_token\", JSON.stringify(res.token));\n        setSuccess(res.message); // history.push(\"/Dashboard\");\n      }).catch(err => {\n        setError(err.response.data.message);\n      });\n    }\n  });\n\n  if (isLoggedIn || localStorage.getItem(\"_token\")) {//return <Redirect to={\"/\"} />;\n  }\n\n  console.log(\"spinnerloading\", spinnerloading);\n  return React.createElement(\"div\", {\n    className: \"login_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    className: \"login_form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Login Form\"), React.createElement(InputField, {\n    label: \"Email\",\n    name: \"email\",\n    className: formik.errors.email && formik.touched.email && \" is-invalid\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.email,\n    errorLabel: formik.errors.email,\n    iconClass: \"email\",\n    placeholder: \"Email \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(InputField, {\n    label: \"Password\",\n    name: \"password\",\n    className: (formik.errors.password && formik.touched.password || error) && \" is-invalid\",\n    onBlur: formik.handleBlur,\n    onChange: formik.handleChange,\n    value: formik.values.password,\n    errorLabel: formik.errors.password || error,\n    iconClass: \"password\",\n    placeholder: \"Password \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), console.log(spinnerloading), React.createElement(Button, {\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, spinnerloading && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \" Loading\"), \"Login\"), error, success));\n};\n\nexport default Login;","map":{"version":3,"sources":["F:/React/reactpro1/src/views/Login/Login.js"],"names":["React","useState","useFormik","Yup","Button","InputField","loginApi","Redirect","useDispatch","useSelector","authAction","loginUser","Login","history","email","password","user","setUser","error","setError","success","setSuccess","loading","spinnerloading","setSpinnerloading","dispatch","state","isLoggedIn","Auth","formik","initialValues","validationSchema","object","shape","string","required","onSubmit","values","then","res","userinfo","token","localStorage","setItem","JSON","stringify","message","catch","err","response","data","getItem","console","log","handleSubmit","errors","touched","handleBlur","handleChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { Button } from \"reactstrap\";\r\nimport \"./login.scss\";\r\nimport InputField from \"../../components/FormFields/InputField.js\";\r\nimport { loginApi } from \"./loginApi\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  authAction,\r\n  loginUser\r\n} from \"../../store/reducers/actions/authActions\";\r\n\r\nconst Login = ({ history }) => {\r\n  const [user, setUser] = useState({ email: \"\", password: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [spinnerloading, setSpinnerloading] = useState({ loading: false });\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { isLoggedIn } = useSelector(state => ({\r\n    isLoggedIn: state.Auth.isLoggedIn\r\n  }));\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: \"\",\r\n      password: \"\"\r\n    },\r\n    validationSchema: Yup.object().shape({\r\n      email: Yup.string()\r\n        .email(\"Email is invalid\")\r\n        .required(\"Email is required\"),\r\n      password: Yup.string().required(\"Password is required\")\r\n    }),\r\n    onSubmit: values => {\r\n      setError(\"\");\r\n      setSuccess(\"\");\r\n      setSpinnerloading({ loading: true });\r\n      loginApi(values.email, values.password)\r\n        .then(res => {\r\n          setSpinnerloading({ loading: false });\r\n          const userinfo = {\r\n            email: values.email,\r\n            password: values.password,\r\n            token: res.token\r\n          };\r\n          dispatch(loginUser(userinfo));\r\n          localStorage.setItem(\"_token\", JSON.stringify(res.token));\r\n          setSuccess(res.message);\r\n          // history.push(\"/Dashboard\");\r\n        })\r\n        .catch(err => {\r\n          setError(err.response.data.message);\r\n        });\r\n    }\r\n  });\r\n\r\n  if (isLoggedIn || localStorage.getItem(\"_token\")) {\r\n    //return <Redirect to={\"/\"} />;\r\n  }\r\n  console.log(\"spinnerloading\", spinnerloading);\r\n  return (\r\n    <div className=\"login_container\">\r\n      <form onSubmit={formik.handleSubmit} className=\"login_form\">\r\n        <h1>Login Form</h1>\r\n        <InputField\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          className={\r\n            formik.errors.email && formik.touched.email && \" is-invalid\"\r\n          }\r\n          onBlur={formik.handleBlur}\r\n          onChange={formik.handleChange}\r\n          value={formik.values.email}\r\n          errorLabel={formik.errors.email}\r\n          iconClass=\"email\"\r\n          placeholder=\"Email \"\r\n        />\r\n\r\n        <InputField\r\n          label=\"Password\"\r\n          name=\"password\"\r\n          className={\r\n            ((formik.errors.password && formik.touched.password) || error) &&\r\n            \" is-invalid\"\r\n          }\r\n          onBlur={formik.handleBlur}\r\n          onChange={formik.handleChange}\r\n          value={formik.values.password}\r\n          errorLabel={formik.errors.password || error}\r\n          iconClass=\"password\"\r\n          placeholder=\"Password \"\r\n        />\r\n        {console.log(spinnerloading)}\r\n        <Button color=\"primary\">\r\n          {spinnerloading && <div> Loading</div>}\r\n          Login\r\n        </Button>\r\n        {error}\r\n        {success}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}