{"ast":null,"code":"import _objectSpread from \"F:\\\\React\\\\reactpro1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"F:\\\\React\\\\reactpro1\\\\src\\\\views\\\\Shop\\\\Shop.js\";\nimport React, { Component } from \"react\";\nimport Products from \"../../components/Shop/Products/Products\";\nimport Filter from \"../../components/Shop/Products/Filter\";\nimport Basket from \"../../components/Shop/Products/Basket\";\nimport \"./shop.scss\"; // import Copyright from \"./components/Copyright\";\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.handleRemoveFromCart = (e, product) => {\n      this.setState(state => {\n        const cartItems = state.cartItems.filter(a => a.id !== product.id);\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    this.handleAddToCart = (e, product) => {\n      this.setState(state => {\n        const cartItems = state.cartItems;\n        let productAlreadyInCart = false;\n        cartItems.forEach(cp => {\n          if (cp.id === product.id) {\n            cp.count += 1;\n            productAlreadyInCart = true;\n          }\n        });\n\n        if (!productAlreadyInCart) {\n          cartItems.push(_objectSpread({}, product, {\n            count: 1\n          }));\n        }\n\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    this.listProducts = () => {\n      this.setState(state => {\n        if (state.sort !== \"\") {\n          state.products.sort((a, b) => state.sort === \"lowestprice\" ? a.price > b.price ? 1 : -1 : a.price < b.price ? 1 : -1);\n        } else {\n          state.products.sort((a, b) => a.id > b.id ? 1 : -1);\n        }\n\n        if (state.size !== \"\") {\n          return {\n            filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0)\n          };\n        }\n\n        return {\n          filteredProducts: state.products\n        };\n      });\n    };\n\n    this.handleSortChange = e => {\n      this.setState({\n        sort: e.target.value\n      });\n      this.listProducts();\n    };\n\n    this.handleSizeChange = e => {\n      this.setState({\n        size: e.target.value\n      });\n      this.listProducts();\n    };\n\n    this.state = {\n      size: \"\",\n      sort: \"\",\n      cartItems: [],\n      products: [],\n      filteredProducts: []\n    };\n  }\n\n  componentWillMount() {\n    if (localStorage.getItem(\"cartItems\")) {\n      this.setState({\n        cartItems: JSON.parse(localStorage.getItem(\"cartItems\"))\n      });\n    }\n\n    fetch(\"https://jsonserverherokukn.herokuapp.com/products\").then(res => res.json()).catch(err => fetch(\"dbd.json\").then(res => res.json()).then(data => data.products)).then(data => {\n      this.setState({\n        products: data\n      });\n      this.listProducts();\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"E-commerce Shopping Cart Application\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Filter, {\n      count: this.state.filteredProducts.length,\n      handleSortChange: this.handleSortChange(e),\n      handleSizeChange: this.handleSizeChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(Products, {\n      products: this.state.filteredProducts,\n      handleAddToCart: this.handleAddToCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Basket, {\n      cartItems: this.state.cartItems,\n      handleRemoveFromCart: this.handleRemoveFromCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["F:/React/reactpro1/src/views/Shop/Shop.js"],"names":["React","Component","Products","Filter","Basket","App","constructor","handleRemoveFromCart","e","product","setState","state","cartItems","filter","a","id","localStorage","setItem","JSON","stringify","handleAddToCart","productAlreadyInCart","forEach","cp","count","push","listProducts","sort","products","b","price","size","filteredProducts","availableSizes","indexOf","toUpperCase","handleSortChange","target","value","handleSizeChange","componentWillMount","getItem","parse","fetch","then","res","json","catch","err","data","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Products from \"../../components/Shop/Products/Products\";\r\nimport Filter from \"../../components/Shop/Products/Filter\";\r\nimport Basket from \"../../components/Shop/Products/Basket\";\r\n\r\nimport \"./shop.scss\";\r\n// import Copyright from \"./components/Copyright\";\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      size: \"\",\r\n      sort: \"\",\r\n      cartItems: [],\r\n      products: [],\r\n      filteredProducts: []\r\n    };\r\n  }\r\n  componentWillMount() {\r\n    if (localStorage.getItem(\"cartItems\")) {\r\n      this.setState({\r\n        cartItems: JSON.parse(localStorage.getItem(\"cartItems\"))\r\n      });\r\n    }\r\n\r\n    fetch(\"https://jsonserverherokukn.herokuapp.com/products\")\r\n      .then(res => res.json())\r\n      .catch(err =>\r\n        fetch(\"dbd.json\")\r\n          .then(res => res.json())\r\n          .then(data => data.products)\r\n      )\r\n      .then(data => {\r\n        this.setState({ products: data });\r\n        this.listProducts();\r\n      });\r\n  }\r\n\r\n  handleRemoveFromCart = (e, product) => {\r\n    this.setState(state => {\r\n      const cartItems = state.cartItems.filter(a => a.id !== product.id);\r\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\r\n      return { cartItems: cartItems };\r\n    });\r\n  };\r\n\r\n  handleAddToCart = (e, product) => {\r\n    this.setState(state => {\r\n      const cartItems = state.cartItems;\r\n      let productAlreadyInCart = false;\r\n\r\n      cartItems.forEach(cp => {\r\n        if (cp.id === product.id) {\r\n          cp.count += 1;\r\n          productAlreadyInCart = true;\r\n        }\r\n      });\r\n\r\n      if (!productAlreadyInCart) {\r\n        cartItems.push({ ...product, count: 1 });\r\n      }\r\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\r\n      return { cartItems: cartItems };\r\n    });\r\n  };\r\n\r\n  listProducts = () => {\r\n    this.setState(state => {\r\n      if (state.sort !== \"\") {\r\n        state.products.sort((a, b) =>\r\n          state.sort === \"lowestprice\"\r\n            ? a.price > b.price\r\n              ? 1\r\n              : -1\r\n            : a.price < b.price\r\n            ? 1\r\n            : -1\r\n        );\r\n      } else {\r\n        state.products.sort((a, b) => (a.id > b.id ? 1 : -1));\r\n      }\r\n      if (state.size !== \"\") {\r\n        return {\r\n          filteredProducts: state.products.filter(\r\n            a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0\r\n          )\r\n        };\r\n      }\r\n      return { filteredProducts: state.products };\r\n    });\r\n  };\r\n  handleSortChange = e => {\r\n    this.setState({ sort: e.target.value });\r\n    this.listProducts();\r\n  };\r\n  handleSizeChange = e => {\r\n    this.setState({ size: e.target.value });\r\n    this.listProducts();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <h1>E-commerce Shopping Cart Application</h1>\r\n        <hr />\r\n        <div className=\"row\">\r\n          <div className=\"col-md-9\">\r\n            <Filter\r\n              count={this.state.filteredProducts.length}\r\n              handleSortChange={this.handleSortChange(e)}\r\n              handleSizeChange={this.handleSizeChange}\r\n            />\r\n            <hr />\r\n            <Products\r\n              products={this.state.filteredProducts}\r\n              handleAddToCart={this.handleAddToCart}\r\n            />\r\n          </div>\r\n          <div className=\"col-md-3\">\r\n            <Basket\r\n              cartItems={this.state.cartItems}\r\n              handleRemoveFromCart={this.handleRemoveFromCart}\r\n            />\r\n            {/* <Copyright /> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}